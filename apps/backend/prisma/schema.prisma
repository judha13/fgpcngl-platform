generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("DATABASE_SHADOW_URL")
}

model Member {
  name       String
  email      String   @unique
  phone      String?
  role       String?  @default("Member")
  join_date  DateTime @default(now()) @map("join_date")
  status     String?  @default("active")
  created_at DateTime @default(now()) @map("created_at")
  updated_at DateTime @updatedAt @map("updated_at")
  id         String   @id @default(uuid()) @db.Uuid

  @@map("members")
}

model Event {
  id               Int          @id @default(autoincrement())
  title            String
  description      String?
  event_date       DateTime     @map("event_date")
  location         String?
  status           String?      @default("ACTIVE")
  attendees        Int?         @default(0)
  created_at       DateTime     @default(now()) @map("created_at")
  updated_at       DateTime     @updatedAt @map("updated_at")
  cover_image      String?
  created_by       Int?         @map("created_by")
  deleted_at       DateTime?    @map("deleted_at")
  live_stream_url  String?
  registration_url String?
  thumbnail_image  String?
  updated_by       Int?         @map("updated_by")
  event_time       DateTime?    @map("event_time")
  images           EventImage[]

  @@map("events")
}

model EventImage {
  id        Int      @id @default(autoincrement())
  eventId   Int
  year      Int
  imagePath String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  event     Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)

  @@map("event_images")
}

model Users {
  userId         String         @id @default(uuid()) @db.Uuid
  email          String?        @unique
  phoneNumber    BigInt?        @unique
  hash           String?
  role           UserRolesEnum?
  activeToken    String?
  created_at     DateTime       @default(now()) @map("created_at")
  updated_at     DateTime       @updatedAt @map("updated_at")
  created_by     String?        @map("created_by")
  tokenExpiresAt DateTime?      @map("token_expires_at")

  @@map("users")
}

enum UserRolesEnum {
  ADMIN
  MODERATOR
}
