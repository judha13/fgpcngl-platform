generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("DATABASE_SHADOW_URL")
}

model Member {
  name       String
  email      String   @unique
  phone      String?
  role       String?  @default("Member")
  join_date  DateTime @default(now()) @map("join_date")
  status     String?  @default("active")
  created_at DateTime @default(now()) @map("created_at")
  updated_at DateTime @updatedAt @map("updated_at")
  id         String   @id @default(uuid()) @db.Uuid

  @@map("members")
}
model Event {
  id              Int          @id @default(autoincrement())
  title           String
  description     String?
  eventDate       DateTime     @map("event_date")
  eventTime       DateTime?    @map("event_time")
  location        String?
  status          String?      @default("ACTIVE")
  attendees       Int?         @default(0)
  created_at      DateTime     @default(now()) @map("created_at")
  updated_at      DateTime     @updatedAt @map("updated_at")
  coverImage      String?      @map("cover_image")
  created_by      Int?         @map("created_by")
  liveStreamUrl   String?      @map("live_stream_url")
  registrationUrl String?      @map("registration_url")
  thumbnailImage  String?      @map("thumbnail_image")
  updated_by      Int?         @map("updated_by")
  deleted_at      DateTime?    @map("deleted_at")
  images          EventImage[]

  @@map("events")
}
model EventImage {
  id        Int      @id @default(autoincrement())
  eventId   Int
  year      Int
  imagePath String
  created_at DateTime @default(now()) @map("created_at")
  updated_at DateTime @updatedAt @map("updated_at")
  event     Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)

  @@map("event_images")
}

model Users {
  userId         String         @id @default(uuid()) @db.Uuid
  email          String?        @unique
  phoneNumber    BigInt?        @unique
  hash           String?
  role           UserRolesEnum?
  activeToken    String?
  created_at     DateTime       @default(now()) @map("created_at")
  updated_at     DateTime       @updatedAt @map("updated_at")
  created_by     String?        @map("created_by")
  tokenExpiresAt DateTime?      @map("token_expires_at")

  @@map("users")
}

enum UserRolesEnum {
  ADMIN
  MODERATOR
}
model GalleryFolder {
  id            Int            @id @default(autoincrement())
  name          String
  slug          String         @unique
  description   String?
  created_at    DateTime       @default(now()) @map("created_at")
  updated_at    DateTime       @updatedAt @map("updated_at")
  imageCount    Int            @default(0) @map("image_count")
  coverImageUrl String?        @map("cover_image_url")
  images        GalleryImage[]

  @@map("gallery_folders")
}

model GalleryImage {
  id          Int           @id @default(autoincrement())
  folderId    Int           @map("folder_id")
  folder      GalleryFolder @relation(fields: [folderId], references: [id], onDelete: Cascade)
  filename    String
  storagePath String        @map("storage_path")
  url         String
  size        Int
  mimeType    String        @map("mime_type")
  width       Int?
  height      Int?
  uploaded_at DateTime      @default(now()) @map("uploaded_at")

  @@map("gallery_images")
}